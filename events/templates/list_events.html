{% extends "base.html" %}
{% load staticfiles i18n %}

{% block content %}
<div class="grid-x grid-padding-x">
    {% for event in events %}
        <div class="small-12 medium-4 cell">
            <div class="ic__card-container">
                <div class="ic__card-photo" style="background-image:url({% if event.photo %}{{ event.photo.url }}{% else %}
                    https://picsum.photos/1200/800?random={{event.pk}}{% endif %})">
                    <div class="ic__card-title">
                        <h2>{{ event }}</h2>
                    </div>
                </div>
                <p class="ic__card-details-item">
                    <i><svg class="ic__icon small"><use xlink:href="#icon-event"></use></svg></i>
                    {% with sd=event.start_datetime ed=event.end_datetime %}
                    <span>
                        {% if sd|date:'Y-m-d' == ed|date:'Y-m-d' %}
                            {% if sd.year == now.year %}
                                {% if sd.month == now.month %}
                                    {{ sd|date:'D, j H:i' }} - {{ ed|date:'H:i' }}
                                {% else %}
                                    {{ sd|date:'D, M j H:i' }} - {{ ed|date:'H:i' }}
                                {% endif %}
                            {% else %}
                                {{ sd }} - {{ ed }}
                            {% endif %}
                        {% else %}
                            {% if sd.year == now.year %}
                                {% if sd.month == now.month %}
                                    {{ sd|date:'D, j H:i' }} - {{ ed|date:'D, j H:i' }}
                                {% else %}
                                    {{ sd|date:'D, M j H:i' }} - {{ ed|date:'D, M j H:i' }}
                                {% endif %}
                            {% else %}
                                {{ sd }} - {{ ed }}
                            {% endif %}
                        {% endif %}
                </span>
                    {% endwith %}
                </p>
                <p class="ic__card-details-item">
                    <i><svg class="ic__icon small"><use xlink:href="#icon-price-euro"></use></svg></i>
                    <span>{% if event.price > 0 %}{{ event.price }}{% else %}{% trans 'Free' %}{% endif %}</span>
                </p>
                <p class="ic__card-details-item">
                    <i><svg class="ic__icon small"><use xlink:href="#icon-location"></use></svg></i>
                    <span><a href="#">Santa Eulalia</a></span>
                </p>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock content %}
